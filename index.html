<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* ===== 基本 ===== */
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: Arial, sans-serif;
  padding: 8px;
}

/* ===== ページ切替 ===== */
.page {
  position: absolute;
  top: 36px;
  left: 0;
  width: 100%;
  height: calc(100dvh - 36px);
  background: white;
  z-index: 1;
}

.hidden {
  display: none;
}

/* ===== 問題画面 ===== */
#quiz {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 8px;
  overflow: hidden;
}

/* 上部（問題・入力） */
#quizTop {
  display: flex;
  flex-direction: column;
  gap: 6px;
  align-items: center;
}

/* 問題文 */
#meaning {
  font-size: 22px;
  font-weight: bold;
  text-align: center;
  margin: 8px 0;
}

/* 正誤 */
#judge {
  font-size: 28px;
  font-weight: bold;
  line-height: 1;
}

.correct { color: #2e7d32; }
.wrong   { color: #c62828; }

/* 正解表示 */
#correctWord {
  font-size: 16px;
  color: #555;
}

/* 入力欄 */
#answerInput {
  font-size: 18px;
  padding: 6px;
  width: 80%;
  max-width: 320px;
  text-align: center;
}

/* ボタン共通 */
#quiz button {
  font-size: 16px;
  padding: 6px 10px;
}

/* ===== キーボード ===== */
#keyboard {
  margin-top: auto; /* ← これが重要：下に固定される */
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.key-row {
  display: flex;
  justify-content: center;
  gap: 4px;
}

.key-row button {
  min-width: 32px;
  height: 32px;
  font-size: 14px;
}

/* ===== 上部操作 ===== */
#quizControls {
  position: static;
  margin-bottom: 6px;
}

#quizControls button {
  font-size: 12px;
  padding: 4px 6px;
}

/* ===== 一覧画面 ===== */
#list {
  padding: 8px;
  overflow-y: auto;
}

/* ===== 一覧テーブル ===== */
#wordTable {
  width: 100%;
  border-collapse: collapse;
  font-size: 14px;
}

#wordTable th,
#wordTable td {
  border: 1px solid #ccc;
  padding: 4px 6px;
  text-align: left;
}

#wordTable th {
  background: #f0f0f0;
  position: sticky;
  top: 0;
}

#progressMini {
  font-size: 14px;
  color: #333;
  margin-bottom: 8px;
}

#wordTable td:last-child:hover {
  background: #eef;
}

/* 正解カード */
#correctWord {
  min-height: 2em;          /* ← 重要：常に場所を確保 */
  padding: 6px 10px;
  border-radius: 6px;
  background: #f5f5f5;
  color: #555;
  font-size: 16px;
  text-align: center;
  transition: all 0.2s;
}

/* 不正解時だけ強調 */
#correctWord.show {
  background: #fff3e0;
  color: #d84315;
  font-weight: bold;
}

  
</style>
</head>

<body>

<div id="quizControls">
  <button onclick="goToQuiz()">問題</button>
  <button onclick="showPage('list')">一覧</button>
  <button onclick="toggleWrongOnlyMode()">不正解のみ</button>
  <button onclick="resetProgress()">リセット</button>
</div>

<main>

<section id="quiz" class="page">
  <div id="quizTop">
    <div id="progressMini"></div>
    <div>
      <span id="meaning"></span>
      <span id="judge"></span>
    </div>

    <div id="correctWord"></div>


    <input id="answerInput" type="text" readonly>

    <button id="checkBtn">回答</button>
    <button id="nextBtn" class="hidden">次へ</button>
    <button id="toggleBtn" class="hidden">正誤切替</button>
  </div>

  <div id="keyboard"></div>
  <select id="keyboardSelect">
  　<option value="mobile">アルファベット配列</option>
  　<option value="qwerty">キーボード配列（QWERTY）</option>
　</select>

</section>

<section id="list" class="page hidden">
  <select id="filter">
    <option value="all">全て</option>
    <option value="correct">正解</option>
    <option value="wrong">不正解</option>
    <option value="unanswered">未出題</option>
  </select>
  <table id="wordTable"></table>
</section>

</main>





<script>
// ===== 単語データ（words.js） =====
const words = [
  {"word": "act", "meaning": "行動する"},
  {"word": "add", "meaning": "加える"},
  {"word": "agree", "meaning": "賛成する"},
  {"word": "answer", "meaning": "答える"},
  {"word": "appear", "meaning": "現れる"},
  {"word": "arrive", "meaning": "着く"},
  {"word": "ask", "meaning": "質問する"},
  {"word": "become", "meaning": "〜になる"},
  {"word": "begin", "meaning": "始める"},
  {"word": "believe", "meaning": "信じる"},
  {"word": "belong", "meaning": "に属する"},
  {"word": "borrow", "meaning": "借りる"},
  {"word": "break", "meaning": "こわす"},
  {"word": "bring", "meaning": "持ってくる"},
  {"word": "build", "meaning": "建てる"},
  {"word": "buy", "meaning": "買う"},
  {"word": "call", "meaning": "呼ぶ、電話する"},
  {"word": "carry", "meaning": "運ぶ"},
  {"word": "catch", "meaning": "つかまえる"},
  {"word": "cause", "meaning": "引き起こす"},
  {"word": "celebrate", "meaning": "お祝う"},
  {"word": "change", "meaning": "変える"},
  {"word": "check", "meaning": "調べる"},
  {"word": "choose", "meaning": "選ぶ"},
  {"word": "clean", "meaning": "きれいにする"},
  {"word": "climb", "meaning": "登る"},
  {"word": "close", "meaning": "閉じる"},
  {"word": "collect", "meaning": "集める"},
  {"word": "come", "meaning": "来る"},
  {"word": "communicate", "meaning": "伝え合う"},
  {"word": "complain", "meaning": "不平を言う"},
  {"word": "contain", "meaning": "〜を含む"},
  {"word": "continue", "meaning": "続ける"},
  {"word": "cook", "meaning": "料理する"},
  {"word": "copy", "meaning": "複写する"},
  {"word": "count", "meaning": "数える"},
  {"word": "cover", "meaning": "おおう"},
  {"word": "create", "meaning": "創造する"},
  {"word": "cross", "meaning": "横切る"},
  {"word": "cry", "meaning": "泣く"},
  {"word": "cut", "meaning": "切る"},
  {"word": "dance", "meaning": "おどる"},
  {"word": "decide", "meaning": "決める"},
  {"word": "destroy", "meaning": "破壊する"},
  {"word": "develop", "meaning": "発達させる"},
  {"word": "die", "meaning": "死ぬ"},
  {"word": "disagree", "meaning": "反対する"},
  {"word": "disappear", "meaning": "消える"},
  {"word": "disappoint", "meaning": "失望させる"},
  {"word": "do", "meaning": "する"},
  {"word": "draw", "meaning": "描く"},
  {"word": "drink", "meaning": "飲む"},
  {"word": "drive", "meaning": "運転する"},
  {"word": "drop", "meaning": "落とす"},
  {"word": "eat", "meaning": "食べる"},
  {"word": "encourage", "meaning": "勇気づける"},
  {"word": "enjoy", "meaning": "楽しむ"},
  {"word": "enter", "meaning": "入る"},
  {"word": "exchange", "meaning": "交換する"},
  {"word": "expect", "meaning": "予期する"},
  {"word": "explain", "meaning": "説明する"},
  {"word": "express", "meaning": "表現する"},
  {"word": "fail", "meaning": "失敗する"},
  {"word": "fall", "meaning": "落ちる"},
  {"word": "feel", "meaning": "感じる"},
  {"word": "fight", "meaning": "戦う"},
  {"word": "fill", "meaning": "いっぱいにする"},
  {"word": "find", "meaning": "見つける"},
  {"word": "finish", "meaning": "終える"},
  {"word": "fix", "meaning": "修理する(f)"},
  {"word": "fly", "meaning": "飛ぶ"},
  {"word": "forget", "meaning": "忘れる"},
  {"word": "gather", "meaning": "集める"},
  {"word": "get", "meaning": "手に入れる"},
  {"word": "give", "meaning": "与える"},
  {"word": "go", "meaning": "行く"},
  {"word": "graduate", "meaning": "卒業する"},
  {"word": "grow", "meaning": "育つ"},
  {"word": "guess", "meaning": "推測する"},
  {"word": "hang", "meaning": "かける"},
  {"word": "happen", "meaning": "起こる"},
  {"word": "hate", "meaning": "嫌う"},
  {"word": "have", "meaning": "持っている"},
  {"word": "hear", "meaning": "聞く(h)"},
  {"word": "help", "meaning": "助ける"},
  {"word": "hold", "meaning": "持つ"},
  {"word": "hope", "meaning": "希望する"},
  {"word": "hurry", "meaning": "いそぐ"},
  {"word": "hurt", "meaning": "傷つける"},
  {"word": "imagine", "meaning": "想像する"},
  {"word": "impress", "meaning": "感銘を与える"},
  {"word": "improve", "meaning": "上達する"},
  {"word": "increase", "meaning": "ふえる"},
  {"word": "injure", "meaning": "傷つける"},
  {"word": "introduce", "meaning": "紹介する"},
  {"word": "invent", "meaning": "発明する"},
  {"word": "invite", "meaning": "招く"},
  {"word": "join", "meaning": "加わる"},
  {"word": "jump", "meaning": "とぶ"},
  {"word": "keep", "meaning": "持続する"},
  {"word": "kick", "meaning": "ける"},
  {"word": "kill", "meaning": "殺す"},
  {"word": "kiss", "meaning": "キスする"},
  {"word": "know", "meaning": "知っている"},
  {"word": "laugh", "meaning": "笑う"},
  {"word": "lead", "meaning": "みちびく"},
  {"word": "learn", "meaning": "学ぶ"},
  {"word": "leave", "meaning": "去る、出発する"},
  {"word": "lend", "meaning": "貸す"},
  {"word": "like", "meaning": "好む"},
  {"word": "listen", "meaning": "聞く(l)"},
  {"word": "live", "meaning": "住む、生きる"},
  {"word": "look", "meaning": "見る(l)"},
  {"word": "lose", "meaning": "失う"},
  {"word": "love", "meaning": "愛する"},
  {"word": "make", "meaning": "つくる"},
  {"word": "marry", "meaning": "結婚する"},
  {"word": "mean", "meaning": "意味する"},
  {"word": "measure", "meaning": "はかる"},
  {"word": "meet", "meaning": "会う"},
  {"word": "miss", "meaning": "失敗する"},
  {"word": "move", "meaning": "動かす"},
  {"word": "need", "meaning": "必要とする"},
  {"word": "notice", "meaning": "気がつく"},
  {"word": "open", "meaning": "開ける"},
  {"word": "order", "meaning": "注文する"},
  {"word": "paint", "meaning": "塗る"},
  {"word": "pass", "meaning": "通過する"},
  {"word": "pay", "meaning": "払う"},
  {"word": "perform", "meaning": "演じる"},
  {"word": "pick", "meaning": "摘む"},
  {"word": "plan", "meaning": "計画する"},
  {"word": "play", "meaning": "遊ぶ"},
  {"word": "practice", "meaning": "練習する"},
  {"word": "prepare", "meaning": "準備する"},
  {"word": "preserve", "meaning": "保存する"},
  {"word": "produce", "meaning": "生産する"},
  {"word": "promise", "meaning": "約束する"},
  {"word": "protect", "meaning": "守る"},
  {"word": "pull", "meaning": "引く"},
  {"word": "push", "meaning": "押す"},
  {"word": "put", "meaning": "置く"},
  {"word": "rain", "meaning": "雨が降る"},
  {"word": "raise", "meaning": "育てる"},
  {"word": "reach", "meaning": "着く"},
  {"word": "read", "meaning": "読む"},
  {"word": "realize", "meaning": "実現する"},
  {"word": "receive", "meaning": "受け取る"},
  {"word": "recycle", "meaning": "リサイクルする"},
  {"word": "reduce", "meaning": "減らす"},
  {"word": "relax", "meaning": "くつろぐ"},
  {"word": "remember", "meaning": "思い出す"},
  {"word": "remove", "meaning": "取り除く"},
  {"word": "repeat", "meaning": "繰り返す"},
  {"word": "repair", "meaning": "修理する(r)"},
  {"word": "respect", "meaning": "尊敬する"},
  {"word": "return", "meaning": "もどる、戻る"},
  {"word": "ride", "meaning": "乗る"},
  {"word": "rise", "meaning": "上がる"},
  {"word": "run", "meaning": "走る"},
  {"word": "save", "meaning": "救う"},
  {"word": "say", "meaning": "言う"},
  {"word": "see", "meaning": "見る(s)"},
  {"word": "sell", "meaning": "売る"},
  {"word": "send", "meaning": "送る"},
  {"word": "shake", "meaning": "振る"},
  {"word": "share", "meaning": "分ける"},
  {"word": "show", "meaning": "見せる"},
  {"word": "sing", "meaning": "歌う"},
  {"word": "sit", "meaning": "座る"},
  {"word": "sleep", "meaning": "眠る"},
  {"word": "smell", "meaning": "においがする"},
  {"word": "snow", "meaning": "雪が降る"},
  {"word": "solve", "meaning": "解く"},
  {"word": "speak", "meaning": "話す(s)"},
  {"word": "spend", "meaning": "費やす"},
  {"word": "stand", "meaning": "立つ"},
  {"word": "start", "meaning": "始める"},
  {"word": "stay", "meaning": "滞在する"},
  {"word": "stop", "meaning": "やめる"},
  {"word": "study", "meaning": "勉強する"},
  {"word": "succeed", "meaning": "成功する"},
  {"word": "support", "meaning": "支持する"},
  {"word": "surprise", "meaning": "驚かせる"},
  {"word": "swim", "meaning": "泳ぐ"},
  {"word": "take", "meaning": "手に取る"},
  {"word": "talk", "meaning": "しゃべる"},
  {"word": "taste", "meaning": "味がする"},
  {"word": "teach", "meaning": "教える"},
  {"word": "tell", "meaning": "伝える"},
  {"word": "thank", "meaning": "感謝する"},
  {"word": "think", "meaning": "考える"},
  {"word": "throw", "meaning": "投げる"},
  {"word": "touch", "meaning": "触れる"},
  {"word": "translate", "meaning": "翻訳する"},
  {"word": "travel", "meaning": "旅行する"},
  {"word": "treat", "meaning": "扱う"},
  {"word": "trust", "meaning": "信頼する"},
  {"word": "try", "meaning": "試す"},
  {"word": "turn", "meaning": "曲がる"},
  {"word": "understand", "meaning": "理解する"},
  {"word": "use", "meaning": "使う"},
  {"word": "visit", "meaning": "訪れる"},
  {"word": "wait", "meaning": "待つ"},
  {"word": "wake", "meaning": "目覚める"},
  {"word": "walk", "meaning": "歩く"},
  {"word": "want", "meaning": "欲しい"},
  {"word": "wash", "meaning": "洗う"},
  {"word": "waste", "meaning": "むだに使う"},
  {"word": "wear", "meaning": "着る"},
  {"word": "win", "meaning": "勝つ"},
  {"word": "wonder", "meaning": "不思議に思う"},
  {"word": "work", "meaning": "働く"},
  {"word": "worry", "meaning": "心配する"},
  {"word": "write", "meaning": "書く"},

  {"word": "afraid", "meaning": "恐れている"},
  {"word": "all", "meaning": "全部の"},
  {"word": "angry", "meaning": "怒った"},
  {"word": "bad", "meaning": "悪い"},
  {"word": "beautiful", "meaning": "美しい"},
  {"word": "best", "meaning": "最もよい"},
  {"word": "better", "meaning": "よりよい"},
  {"word": "big", "meaning": "大きい"},
  {"word": "brave", "meaning": "勇敢な"},
  {"word": "bright", "meaning": "明るい"},
  {"word": "busy", "meaning": "忙しい"},
  {"word": "careful", "meaning": "注意深い"},
  {"word": "cheap", "meaning": "安い"},
  {"word": "clean", "meaning": "きれいな"},
  {"word": "clever", "meaning": "りこうな"},
  {"word": "comfortable", "meaning": "快適な"},
  {"word": "common", "meaning": "共通の"},
  {"word": "cool", "meaning": "すずしい"},
  {"word": "cute", "meaning": "かわいい"},
  {"word": "dangerous", "meaning": "危ない"},
  {"word": "dark", "meaning": "暗い"},
  {"word": "dead", "meaning": "死んだ"},
  {"word": "deep", "meaning": "深い"},
  {"word": "delicious", "meaning": "とてもおいしい"},
  {"word": "different", "meaning": "ちがう、異なった"},
  {"word": "difficult", "meaning": "難しい"},
  {"word": "dirty", "meaning": "きたない"},
  {"word": "dry", "meaning": "乾いた"},
  {"word": "early", "meaning": "早い"},
  {"word": "easy", "meaning": "やさしい、容易な"},
  {"word": "electric", "meaning": "電気の"},
  {"word": "empty", "meaning": "空(から)の"},
  {"word": "exciting", "meaning": "わくわくするような"},
  {"word": "expensive", "meaning": "高価な"},
  {"word": "famous", "meaning": "有名な"},
  {"word": "fast", "meaning": "速い(f)"},
  {"word": "favorite", "meaning": "お気に入りの"},
  {"word": "foreign", "meaning": "外国の"},
  {"word": "free", "meaning": "ひまな、自由な、無料の"},
  {"word": "fresh", "meaning": "新鮮な"},
  {"word": "friendly", "meaning": "好意的な"},
  {"word": "funny", "meaning": "おもしろい"},
  {"word": "glad", "meaning": "うれしい(g)"},
  {"word": "good", "meaning": "良い"},
  {"word": "gray", "meaning": "灰色の"},
  {"word": "great", "meaning": "すごい"},
  {"word": "happy", "meaning": "幸せな、うれしい"},
  {"word": "healthy", "meaning": "健康な"},
  {"word": "heavy", "meaning": "重い"},
  {"word": "high", "meaning": "高い"},
  {"word": "honest", "meaning": "正直な"},
  {"word": "hungry", "meaning": "空腹の"},
  {"word": "important", "meaning": "重要な、大事な"},
  {"word": "impossible", "meaning": "不可能な"},
  {"word": "interesting", "meaning": "面白い"},
  {"word": "international", "meaning": "国際的な"},
  {"word": "large", "meaning": "大きい、広い"},
  {"word": "last", "meaning": "最後の、以前の"},
  {"word": "late", "meaning": "遅れた"},
  {"word": "little", "meaning": "小さい"},
  {"word": "lonely", "meaning": "孤独な"},
  {"word": "long", "meaning": "長い"},
  {"word": "loud", "meaning": "うるさい"},
  {"word": "low", "meaning": "低い"},
  {"word": "lucky", "meaning": "幸運な"},
  {"word": "narrow", "meaning": "せまい"},
  {"word": "national", "meaning": "国の"},
  {"word": "natural", "meaning": "自然の"},
  {"word": "necessary", "meaning": "必要な"},
  {"word": "nervous", "meaning": "緊張した"},
  {"word": "new", "meaning": "新しい"},
  {"word": "next", "meaning": "次の"},
  {"word": "nice", "meaning": "すてきな"},
  {"word": "normal", "meaning": "普通の"},
  {"word": "old", "meaning": "古い、年をとった"},
  {"word": "original", "meaning": "独自の"},
  {"word": "peaceful", "meaning": "平和な"},
  {"word": "perfect", "meaning": "完ぺきな"},
  {"word": "personal", "meaning": "個人の"},
  {"word": "popular", "meaning": "人気のある"},
  {"word": "possible", "meaning": "可能な"},
  {"word": "pretty", "meaning": "かわいい、きれいな"},
  {"word": "professional", "meaning": "プロの"},
  {"word": "quick", "meaning": "速い(q)"},
  {"word": "quiet", "meaning": "静かな(q)"},
  {"word": "rare", "meaning": "まれな"},
  {"word": "ready", "meaning": "用意ができて"},
  {"word": "red", "meaning": "赤い"},
  {"word": "rich", "meaning": "お金持ちの"},
  {"word": "right", "meaning": "正しい"},
  {"word": "sad", "meaning": "悲しい"},
  {"word": "safe", "meaning": "安全な"},
  {"word": "same", "meaning": "同じ"},
  {"word": "short", "meaning": "短い、背が低い"},
  {"word": "shy", "meaning": "恥ずかしがりの"},
  {"word": "sick", "meaning": "病気の"},
  {"word": "silent", "meaning": "静かな(s)"},
  {"word": "similar", "meaning": "似た"},
  {"word": "simple", "meaning": "簡単な"},
  {"word": "sleepy", "meaning": "眠い"},
  {"word": "slow", "meaning": "おそい"},
  {"word": "small", "meaning": "小さい"},
  {"word": "smart", "meaning": "お利口な"},
  {"word": "soft", "meaning": "やわらかい"},
  {"word": "special", "meaning": "特別な"},
  {"word": "strange", "meaning": "奇妙な"},
  {"word": "straight", "meaning": "まっすぐな"},
  {"word": "strong", "meaning": "強い"},
  {"word": "sweet", "meaning": "あまい"},
  {"word": "tall", "meaning": "背が高い"},
  {"word": "terrible", "meaning": "おそろしい"},
  {"word": "thick", "meaning": "厚い"},
  {"word": "thin", "meaning": "うすい"},
  {"word": "tired", "meaning": "つかれた、あきた"},
  {"word": "true", "meaning": "真実の"},
  {"word": "unhappy", "meaning": "不幸せな"},
  {"word": "useful", "meaning": "役立つ"},
  {"word": "usual", "meaning": "いつもの"},
  {"word": "weak", "meaning": "弱い"},
  {"word": "well", "meaning": "健康な"},
  {"word": "whole", "meaning": "全体の、すべての"},
  {"word": "wide", "meaning": "広い"},
  {"word": "wild", "meaning": "野生的な"},
  {"word": "wonderful", "meaning": "すばらしい"},
  {"word": "wrong", "meaning": "間違った"},
  {"word": "young", "meaning": "若い"},

{"word":"Monday","meaning":"月曜日"},
{"word":"Tuesday","meaning":"火曜日"},
{"word":"Wednesday","meaning":"水曜日"},
{"word":"Thursday","meaning":"木曜日"},
{"word":"Friday","meaning":"金曜日"},
{"word":"Saturday","meaning":"土曜日"},
{"word":"Sunday","meaning":"日曜日"},

{"word":"January","meaning":"1月"},
{"word":"February","meaning":"2月"},
{"word":"March","meaning":"3月"},
{"word":"April","meaning":"4月"},
{"word":"May","meaning":"5月"},
{"word":"June","meaning":"6月"},
{"word":"July","meaning":"7月"},
{"word":"August","meaning":"8月"},
{"word":"September","meaning":"9月"},
{"word":"October","meaning":"10月"},
{"word":"November","meaning":"11月"},
{"word":"December","meaning":"12月"},

{"word":"zero","meaning":"0"},
{"word":"one","meaning":"1"},
{"word":"two","meaning":"2"},
{"word":"three","meaning":"3"},
{"word":"four","meaning":"4"},
{"word":"five","meaning":"5"},
{"word":"six","meaning":"6"},
{"word":"seven","meaning":"7"},
{"word":"eight","meaning":"8"},
{"word":"nine","meaning":"9"},
{"word":"ten","meaning":"10"},
{"word":"eleven","meaning":"11"},
{"word":"twelve","meaning":"12"},
{"word":"thirteen","meaning":"13"},
{"word":"fourteen","meaning":"14"},
{"word":"fifteen","meaning":"15"},
{"word":"sixteen","meaning":"16"},
{"word":"seventeen","meaning":"17"},
{"word":"eighteen","meaning":"18"},
{"word":"nineteen","meaning":"19"},
{"word":"twenty","meaning":"20"},
{"word":"thirty","meaning":"30"},
{"word":"forty","meaning":"40"},
{"word":"fifty","meaning":"50"},
{"word":"sixty","meaning":"60"},
{"word":"seventy","meaning":"70"},
{"word":"eighty","meaning":"80"},
{"word":"ninety","meaning":"90"},
{"word":"hundred","meaning":"100"},
{"word":"thousand","meaning":"1000"},
{"word":"once","meaning":"1回"},
{"word":"twice","meaning":"2回"},
{"word":"first","meaning":"最初の・1番目"},
{"word":"second","meaning":"2番目"},
{"word":"third","meaning":"3番目"},

{"word":"red","meaning":"赤い"},
{"word":"blue","meaning":"青い"},
{"word":"yellow","meaning":"黄色の"},
{"word":"green","meaning":"緑の"},
{"word":"black","meaning":"黒い"},
{"word":"white","meaning":"白い"},

{"word":"sunny","meaning":"晴れの"},
{"word":"rainy","meaning":"雨の"},
{"word":"cloudy","meaning":"くもりの"},
{"word":"snowy","meaning":"雪の"},
{"word":"windy","meaning":"風の強い"},
{"word":"hot","meaning":"暑い"},
{"word":"warm","meaning":"暖かい"},
{"word":"cool","meaning":"涼しい"},
{"word":"cold","meaning":"寒い"},
{"word":"weather","meaning":"天気"}
];


// ========= main.js 統合部分 =========
let progress = {};
let current = null;
let lastJudge = null;
let wrongOnlyMode = false;
let currentLayout = localStorage.getItem("keyboardLayout") || "mobile";
let unattemptedOnlyMode = false;

  
const keyboardLayouts = {
  mobile: [
    ["a","b","c","d","e","f","g","h","i"],
    ["j","k","l","m","n","o","p","q","r"],
    ["shift","s","t","u","v","w","x","y","z","del"]
  ],
  qwerty: [
    ["q","w","e","r","t","y","u","i","o","p"],
    ["a","s","d","f","g","h","j","k","l"],
    ["shift","z","x","c","v","b","n","m","del"]
  ]
};


const meaning = document.getElementById("meaning");
const judge = document.getElementById("judge");
const correctWord = document.getElementById("correctWord");
const input = document.getElementById("answerInput");
const checkBtn = document.getElementById("checkBtn");
const nextBtn = document.getElementById("nextBtn");
const toggleBtn = document.getElementById("toggleBtn");
const progressMini = document.getElementById("progressMini");


function getNextWord() {
  const list = words.filter(w => {
    const s = progress[w.word.toLowerCase()];

    if (wrongOnlyMode) {
      return s === "wrong";
    }

    if (unattemptedOnlyMode) {
      return s === undefined;
    }

    return s !== "correct";
  });

  return list.length
    ? list[Math.floor(Math.random() * list.length)]
    : null;
}


function updateProgressMini() {
  if (!progressMini) return;

  // 不正解数
  const wrongCount =
    Object.values(progress).filter(v => v === "wrong").length;

  if (wrongOnlyMode) {
    progressMini.textContent = `不正解：${wrongCount} 問`;
  } else {
    progressMini.textContent =
      `進捗：${Object.keys(progress).length} / ${words.length}`;
  }
}



function renderQuestion() {
  current = getNextWord();
  lastJudge = null;

  if (!current) {
    meaning.textContent = "学習完了！";
    return;
  }

  meaning.textContent = current.meaning;
  judge.textContent = "";
  judge.className = "";
  input.value = "";
  correctWord.textContent = "";
  correctWord.classList.remove("show");
  checkBtn.disabled = false;
  nextBtn.classList.add("hidden");
  toggleBtn.classList.add("hidden");
}

checkBtn.onclick = () => {
  const ok = input.value.toLowerCase() === current.word.toLowerCase();
  lastJudge = ok ? "correct" : "wrong";

  judge.textContent = ok ? "◎" : "✕";
  judge.className = ok ? "correct" : "wrong";

  if (!ok) {
    correctWord.textContent = "答え: " + current.word;
    correctWord.classList.add("show");

  }

  checkBtn.disabled = true;
  nextBtn.classList.remove("hidden");
  toggleBtn.classList.remove("hidden");
};

toggleBtn.onclick = () => {
  if (!current) return;

  if (lastJudge === "correct") {
    // ◎ → ✕
    lastJudge = "wrong";
    judge.textContent = "✕";
    judge.className = "wrong";

    correctWord.textContent = "答え: " + current.word;
    correctWord.classList.add("show");   // ← 強調ON

  } else {
    // ✕ → ◎
    lastJudge = "correct";
    judge.textContent = "◎";
    judge.className = "correct";

    correctWord.classList.remove("show"); // ← 強調OFF
  }
};

nextBtn.onclick = () => {
  if (!current || !lastJudge) return;

  const key = current.word.toLowerCase();   // ★ 必須
  progress[key] = lastJudge;

  localStorage.setItem("progress", JSON.stringify(progress));
  updateProgressMini();
  renderQuestion();
};



function loadData() {
  progress = JSON.parse(localStorage.getItem("progress") || "{}");
  updateProgressMini();   // ← 追加
  renderQuestion();
}
  
function toggleWrongOnlyMode() {
  wrongOnlyMode = !wrongOnlyMode;
  renderQuestion();
}

function resetProgress() {
  if (!confirm("リセットしますか？")) return;
  progress = {};
  localStorage.removeItem("progress");
  wrongOnlyMode = false;
  renderQuestion();
}

function renderList() {
  const table = document.getElementById("wordTable");
  table.innerHTML = "";

  // ヘッダー
  const thead = document.createElement("thead");
  const headRow = document.createElement("tr");

  ["単語", "意味", "状態"].forEach(text => {
    const th = document.createElement("th");
    th.textContent = text;
    headRow.appendChild(th);
  });

  thead.appendChild(headRow);
  table.appendChild(thead);

  // 本体
  const tbody = document.createElement("tbody");

  words.forEach(w => {
    const tr = document.createElement("tr");

    const tdWord = document.createElement("td");
    tdWord.textContent = w.word;

    const tdMeaning = document.createElement("td");
    tdMeaning.textContent = w.meaning;

    const tdStatus = document.createElement("td");

    const key = w.word.toLowerCase();
    const state = progress[key];

    tdStatus.textContent =
      state === "correct" ? "〇" :
      state === "wrong"   ? "×" : "";

    // クリックで循環
    tdStatus.style.cursor = "pointer";
    tdStatus.onclick = () => {
      if (!progress[key]) {
        // 未出題 → 〇
        progress[key] = "correct";
      } else if (progress[key] === "correct") {
        // 〇 → ×
        progress[key] = "wrong";
      } else if (progress[key] === "wrong") {
        // × → 未出題
        delete progress[key];
      }

      localStorage.setItem("progress", JSON.stringify(progress));
      renderList();
    };




    tr.appendChild(tdWord);
    tr.appendChild(tdMeaning);
    tr.appendChild(tdStatus);

    tbody.appendChild(tr);
  });

  table.appendChild(tbody);
}



function showPage(id) {
  document.querySelectorAll(".page").forEach(p => p.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");

  if (id === "list") {
    renderList();
  }
}

function goToQuiz() {
  // 不正解のみ出題モード中なら
  if (wrongOnlyMode) {
    wrongOnlyMode = false;
    unattemptedOnlyMode = true;
  }

  showPage("quiz");
  renderQuestion();
}

  
document.getElementById("filter").onchange = renderList;

loadData();

/* ===== キーボード ===== */
const keyboard = document.getElementById("keyboard");
let upper = false;

function buildKeyboard() {
  keyboard.innerHTML = "";

  const layout = keyboardLayouts[currentLayout];

  layout.forEach(row => {
    const rowDiv = document.createElement("div");
    rowDiv.className = "key-row";

    row.forEach(ch => {
      const btn = document.createElement("button");

      // 表示テキスト
      if (ch === "shift") {
        btn.textContent = "Shift";
        btn.classList.toggle("active", upper);

        btn.onclick = () => {
          upper = true;          // 一時ON
          buildKeyboard();
        };

      } else if (ch === "del") {
        btn.textContent = "⌫";

        btn.onclick = () => {
          input.value = input.value.slice(0, -1);
        };

      } else {
        // 通常文字キー
        btn.textContent = upper ? ch.toUpperCase() : ch;

        btn.onclick = () => {
          input.value += upper ? ch.toUpperCase() : ch;

          // 1文字入力後に Shift を解除
          if (upper) {
            upper = false;
            buildKeyboard();
          }
        };
      }

      rowDiv.appendChild(btn);
    });

    keyboard.appendChild(rowDiv);
  });
}


const keyboardSelect = document.getElementById("keyboardSelect");
keyboardSelect.value = currentLayout;

keyboardSelect.onchange = () => {
  currentLayout = keyboardSelect.value;
  localStorage.setItem("keyboardLayout", currentLayout);
  buildKeyboard();
};

buildKeyboard();

</script>

</body>
</html>

















